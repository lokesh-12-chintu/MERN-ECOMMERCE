{"ast":null,"code":"import axios from \"../helpers/axios\";\nimport { cartConstants } from \"./constants\";\nimport store from \"../store\";\nexport const addToCart = product => {\n  return async dispatch => {\n    const {\n      cartItems\n    } = store.getState().cart;\n    const qty = cartItems[product._id] ? parseInt(cartItems[product._id].qty + 1) : 1;\n    cartItems[product._id] = {\n      ...product,\n      qty\n    };\n    dispatch({\n      type: cartConstants.ADD_TO_CART,\n      payload: {\n        cartItems\n      }\n    });\n  };\n};\nexport const updateCart = () => {\n  return async dispatch => {\n    const cartItems = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem(cart)) : null;\n    if (cart) {\n      dispatch({\n        type: cartConstants.ADD_TO_CART,\n        payload: {\n          cartItems: cart\n        }\n      });\n    }\n  };\n};\nexport const getCartItems = () => {\n  return async dispatch => {\n    try {\n      dispatch({\n        type: cartConstants.ADD_TO_CART_REQUEST\n      });\n      const res = await axios.post(`/user/getCartItems`);\n      if (res.status === 200) {\n        const {\n          cartItems\n        } = res.data;\n        console.log({\n          getCartItems: cartItems\n        });\n        if (cartItems) {\n          dispatch({\n            type: cartConstants.ADD_TO_CART_SUCCESS,\n            payload: {\n              cartItems\n            }\n          });\n        }\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};\nexport const removeCartItem = payload => {\n  return async dispatch => {\n    try {\n      dispatch({\n        type: cartConstants.REMOVE_CART_ITEM_REQUEST\n      });\n      const res = await axios.post(`/user/cart/removeItem`, {\n        payload\n      });\n      if (res.status === 202) {\n        dispatch({\n          type: cartConstants.REMOVE_CART_ITEM_SUCCESS\n        });\n        dispatch(getCartItems());\n      } else {\n        const {\n          error\n        } = res.data;\n        dispatch({\n          type: cartConstants.REMOVE_CART_ITEM_FAILURE,\n          payload: {\n            error\n          }\n        });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};","map":{"version":3,"names":["axios","cartConstants","store","addToCart","product","dispatch","cartItems","getState","cart","qty","_id","parseInt","type","ADD_TO_CART","payload","updateCart","localStorage","getItem","JSON","parse","getCartItems","ADD_TO_CART_REQUEST","res","post","status","data","console","log","ADD_TO_CART_SUCCESS","error","removeCartItem","REMOVE_CART_ITEM_REQUEST","REMOVE_CART_ITEM_SUCCESS","REMOVE_CART_ITEM_FAILURE"],"sources":["C:/Users/jitta/MERN-ECOMMERCE/flipkart-clone/src/actions/cart.action.js"],"sourcesContent":["import axios from \"../helpers/axios\";\r\nimport { cartConstants } from \"./constants\";\r\nimport store from \"../store\";\r\n\r\n\r\nexport const addToCart = (product) => {\r\n  return async dispatch => { \r\n    const {cartItems} = store.getState().cart;\r\n    const qty = cartItems[product._id]\r\n      ? parseInt(cartItems[product._id].qty + 1)\r\n      : 1;\r\n    cartItems[product._id] = { \r\n      ...product, \r\n      qty\r\n    }\r\n    \r\n    dispatch({ \r\n      type:cartConstants.ADD_TO_CART, \r\n      payload: {\r\n        cartItems\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport const updateCart = () => { \r\n  return async dispatch => { \r\n    const cartItems = localStorage.getItem('cart') ?  \r\n        JSON.parse(localStorage.getItem(cart)) : null; \r\n    \r\n    if(cart){ \r\n      dispatch({ \r\n        type: cartConstants.ADD_TO_CART,\r\n        payload: {cartItems:cart}\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport const getCartItems = () => {\r\n  return async (dispatch) => {\r\n    try {\r\n      dispatch({ type: cartConstants.ADD_TO_CART_REQUEST });\r\n      const res = await axios.post(`/user/getCartItems`);\r\n      if (res.status === 200) {\r\n        const { cartItems } = res.data;\r\n        console.log({ getCartItems: cartItems });\r\n        if (cartItems) {\r\n          dispatch({\r\n            type: cartConstants.ADD_TO_CART_SUCCESS,\r\n            payload: { cartItems },\r\n          });\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n};\r\n\r\n\r\n\r\nexport const removeCartItem = (payload) => {\r\n  return async (dispatch) => {\r\n    try {\r\n      dispatch({ type: cartConstants.REMOVE_CART_ITEM_REQUEST });\r\n      const res = await axios.post(`/user/cart/removeItem`, { payload });\r\n      if (res.status === 202) {\r\n        dispatch({ type: cartConstants.REMOVE_CART_ITEM_SUCCESS });\r\n        dispatch(getCartItems());\r\n      } else {\r\n        const { error } = res.data;\r\n        dispatch({\r\n          type: cartConstants.REMOVE_CART_ITEM_FAILURE,\r\n          payload: { error },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n};\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}